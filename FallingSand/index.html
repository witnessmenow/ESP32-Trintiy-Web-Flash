<!DOCTYPE html>
<html>


<body>
    <h1>Falling Sand</h1>

    <p>An example falling sand project for your ESP32 Trinity.</p>

    <div id="main" style="display: none;">
        <div>
            <input type="checkbox" id="clk" name="clk" onclick="updateManifest();">
            <label for="clk">Set "clkphase" false</label>
          </div>
          
          <div>
            <input type="checkbox" id="driver" name="driver" onclick="updateManifest();">
            <label for="driver">Set Driver to FM6126A</label>
          </div>
    
        <script type="module" src="https://unpkg.com/esp-web-tools@3.4.2/dist/web/install-button.js?module"></script>
        <esp-web-install-button id="installButton" manifest="bins/manifest.json"></esp-web-install-button>
    </div>
    <div id="notSupported" style="display: none;">
        Your browser does not support the Web Serial API.
    </div>
    

    <script>
        if(!navigator.serial){
            document.getElementById("notSupported").style.display = 'none';
            document.getElementById("main").style.display = 'block';
        } else {
            document.getElementById("notSupported").style.display = 'block';
            document.getElementById("main").style.display = 'none';
        }
        var installButton = document.getElementById("installButton");
        var clkCheck = document.getElementById("clk");
        var driverCheck = document.getElementById("driver");
        function updateManifest(){
            var url = "bins/manifest";

            if(clkCheck.checked){
                url += "_clk";
            }

            if(driverCheck.checked){
                url += "_driver";
            }

            url += ".json";

            installButton.setAttribute("manifest", url);

        }
    </script>

</body>

</html>